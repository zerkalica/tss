$mol_speck $mol_view
	attr *
		^
		mol_theme <= theme \$mol_theme_accent
	style *
		^
		minHeight \1em
	sub /
		<= value null

$mol_button $mol_view
	enabled true
	click?event null
	event_click?event null
	event *
		^
		click?event <=> event_activate?event null
		dblclick?event <=> clicks?event null
		keydown?event <=> event_key_press?event null 
	attr *
		^
		disabled <= disabled false
		role \button
		tabindex <= tab_index 0
		title <= hint_safe <= hint \
	sub /$mol_view_content
		<= title
	Speck $mol_speck
		value <= error \

$mol_button_typed $mol_button
	minimal_height 40
	minimal_width 40

$mol_button_minor $mol_button_typed

$mol_meter $mol_plugin
	zoom 1
	-
	width?val 0
	height?val 0
	-
	left?val 0
	right?val 0
	bottom?val 0
	top?val 0

$mol_touch $mol_plugin
	start_zoom?val 0
	start_distance?val 0
	zoom?val 1
	allow_draw true
	allow_pan true
	allow_zoom true
	action_type?val \
	action_point?val $mol_vector_2d /
		NaN
		NaN
	-
	start_pan?val /
		0
		0
	pan?val $mol_vector_2d /
		0
		0
	pointer_center $mol_vector_2d /
		NaN
		NaN
	-
	start_pos?val null
	swipe_precision 16
	-
	swipe_right?val null
	swipe_bottom?val null
	swipe_left?val null
	swipe_top?val null
	-
	swipe_from_right?val null
	swipe_from_bottom?val null
	swipe_from_left?val null
	swipe_from_top?val null
	-
	swipe_to_right?val null
	swipe_to_bottom?val null
	swipe_to_left?val null
	swipe_to_top?val null
	-
	draw_start?event null
	draw?event null
	draw_end?event null
	-
	style *
		^
		touch-action \none
		overscroll-behavior \none
	-
	event *
		^
		pointerdown?event <=> event_start?event null
		pointermove?event <=> event_move?event null
		pointerup?event <=> event_end?event null
		pointerleave?event <=> event_leave?event null
		wheel?event <=> event_wheel?event null

$mol_ghost $mol_view
	Sub $mol_view

$mol_book $mol_view
	sub <= pages_wrapped /$mol_view
	minimal_width 0
	pages /$mol_view
	plugins /$mol_plugin
		<= Meter $mol_meter
			width => width
		<= Touch $mol_touch
			swipe_from_left?val <=> event_front_up?val null
			swipe_to_left?val <=> event_front_down?val null
	Page* $mol_book_page
		Sub <= page* null
		visible <= page_visible* true
	Placeholder $mol_book_placeholder
		title <= title

$mol_book_placeholder $mol_view
	minimal_width 400
	attr *
		^
		tabindex null

$mol_book_page $mol_ghost
	attr_static *
		^
		tabindex 0
		mol_book_page_visible true
	attr *
		^
		mol_book_page_focused <= focused
		mol_book_page_visible <= visible true

$mol_scroll $mol_view
	scroll_top?val 0
	scroll_left?val 0
	field *
		^
		tabIndex <= tabindex -1
	event *
		^
		scroll?event <=> event_scroll?event null

$mol_book2 $mol_scroll
	sub <= pages /$mol_view
	minimal_width 0
	Placeholder $mol_view
	Gap* $mol_view title \

$mol_link $mol_view
	uri \
	dom_name \a
	attr *
		^
		href <= uri_toggle \
		title <= hint_safe <= hint \
		target <= target \_self
		download <= file_name \
		mol_link_current <= current false
	sub /$mol_view_content
		<= title
	arg *
	event *
		^
		click?event <=> click?event <=> event_click?event null

$mpk_tss_link $mol_link
	copy_params /string


$mol_svg $mol_view
	dom_name \svg
	dom_name_space \http://www.w3.org/2000/svg
	font_size 16
	font_family \
	style_size *

$mol_svg_root $mol_svg
	dom_name \svg
	attr *
		^
		viewBox <= view_box \0 0 100 100
		preserveAspectRatio <= aspect \xMidYMid

$mol_svg_path $mol_svg
	dom_name \path
	attr *
		^
		d <= geometry \


$mol_icon $mol_svg_root
	view_box \0 0 24 24
	minimal_width 16
	minimal_height 16
	sub /
		<= Path $mol_svg_path
			geometry <= path \

$mpk_tss_icon_train $mol_icon path \M12 2c-4 0-8 .5-8 4v9.5C4 17.43 5.57 19 7.5 19L6 20.5v.5h2.23l2-2H14l2 2h2v-.5L16.5 19c1.93 0 3.5-1.57 3.5-3.5V6c0-3.5-3.58-4-8-4zM7.5 17c-.83 0-1.5-.67-1.5-1.5S6.67 14 7.5 14s1.5.67 1.5 1.5S8.33 17 7.5 17zm3.5-7H6V6h5v4zm2 0V6h5v4h-5zm3.5 7c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z
$mpk_tss_icon_exit_to_app $mol_icon path \M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z
$mpk_tss_icon_autorenew $mol_icon path \M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z
$mpk_tss_icon_cloud_download $mol_icon path \M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3
$mpk_tss_icon_done $mol_icon path \M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z
$mpk_tss_icon_schedule $mol_icon path \M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z
$mpk_tss_icon_error $mol_icon path \M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 36h-2v-2h2v2zm0-4h-2V7h2v6z
$mpk_tss_icon_warning $mol_icon path \M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z
$mpk_tss_icon_sync $mol_icon path \M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z
$mpk_tss_icon_clear $mol_icon path \M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z
$mpk_tss_icon_block $mol_icon path \M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z
$mpk_tss_icon_circle_outline $mol_icon path \M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.88-11.71L10 14.17l-1.88-1.88c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l2.59 2.59c.39.39 1.02.39 1.41 0L17.3 9.7c.39-.39.39-1.02 0-1.41-.39-.39-1.03-.39-1.42 0z
$mpk_tss_icon_round_warning $mol_icon path \M4.47 21h15.06c1.54 0 2.5-1.67 1.73-3L13.73 4.99c-.77-1.33-2.69-1.33-3.46 0L2.74 18c-.77 1.33.19 3 1.73 3zM12 14c-.55 0-1-.45-1-1v-2c0-.55.45-1 1-1s1 .45 1 1v2c0 .55-.45 1-1 1zm1 4h-2v-2h2v2z

$mol_page $mol_view
	dom_name \article
	field *
		^
		tabIndex <= tabindex -1
	sub /
		<= Head $mol_view
			minimal_height 64
			dom_name \header
			sub <= head /
				<= Title $mol_view
					dom_name \h1
					sub <= title_content /
						<= Logo null
						<= title
				<= Tools $mol_view
					sub <= tools /$mol_view_content
		<= Body $mol_scroll
			scroll_top?val => body_scroll_top?val
			sub <= body /$mol_view_content
		<= Foot $mol_view
			dom_name \footer
			sub <= foot /$mol_view

$mol_filler $mol_view
	minimal_height 500
	sub /
		\Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec a diam lectus. Sed sit amet ipsum mauris. Maecenas congue ligula ac quam viverra nec consectetur ante hendrerit. Donec et mollis dolor. Praesent et diam eget libero egestas mattis sit amet vitae augue. Nam tincidunt congue enim, ut porta lorem lacinia consectetur. Donec ut libero sed arcu vehicula ultricies a non tortor. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean ut gravida lorem. Ut turpis felis, pulvinar a semper sed, adipiscing id dolor. Pellentesque auctor nisi id magna consequat sagittis. Curabitur dapibus enim sit amet elit pharetra tincidunt feugiat nisl imperdiet. Ut convallis libero in urna ultrices accumsan. Donec sed odio eros. Donec viverra mi quis quam pulvinar at malesuada arcu rhoncus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. In rutrum accumsan ultricies. Mauris vitae nisi at sem facilisis semper ac in est.
		\Vivamus fermentum semper porta. Nunc diam velit, adipiscing ut tristique vitae, sagittis vel odio. Maecenas convallis ullamcorper ultricies. Curabitur ornare, ligula semper consectetur sagittis, nisi diam iaculis velit, id fringilla sem nunc vel mi. Nam dictum, odio nec pretium volutpat, arcu ante placerat erat, non tristique elit urna et turpis. Quisque mi metus, ornare sit amet fermentum et, tincidunt et orci. Fusce eget orci a orci congue vestibulum. Ut dolor diam, elementum et vestibulum eu, porttitor vel elit. Curabitur venenatis pulvinar tellus gravida ornare. Sed et erat faucibus nunc euismod ultricies ut id justo. Nullam cursus suscipit nisi, et ultrices justo sodales nec. Fusce venenatis facilisis lectus ac semper. Aliquam at massa ipsum. Quisque bibendum purus convallis nulla ultrices ultricies. Nullam aliquam, mi eu aliquam tincidunt, purus velit laoreet tortor, viverra pretium nisi quam vitae mi. Fusce vel volutpat elit. Nam sagittis nisi dui.
		\Suspendisse lectus leo, consectetur in tempor sit amet, placerat quis neque. Etiam luctus porttitor lorem, sed suscipit est rutrum non. Curabitur lobortis nisl a enim congue semper. Aenean commodo ultrices imperdiet. Vestibulum ut justo vel sapien venenatis tincidunt. Phasellus eget dolor sit amet ipsum dapibus condimentum vitae quis lectus. Aliquam ut massa in turpis dapibus convallis. Praesent elit lacus, vestibulum at malesuada et, ornare et est. Ut augue nunc, sodales ut euismod non, adipiscing vitae orci. Mauris ut placerat justo. Mauris in ultricies enim. Quisque nec est eleifend nulla ultrices egestas quis ut quam. Donec sollicitudin lectus a mauris pulvinar id aliquam urna cursus. Cras quis ligula sem, vel elementum mi. Phasellus non ullamcorper urna.
		\Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. In euismod ultrices facilisis. Vestibulum porta sapien adipiscing augue congue id pretium lectus molestie. Proin quis dictum nisl. Morbi id quam sapien, sed vestibulum sem. Duis elementum rutrum mauris sed convallis. Proin vestibulum magna mi. Aenean tristique hendrerit magna, ac facilisis nulla hendrerit ut. Sed non tortor sodales quam auctor elementum. Donec hendrerit nunc eget elit pharetra pulvinar. Suspendisse id tempus tortor. Aenean luctus, elit commodo laoreet commodo, justo nisi consequat massa, sed vulputate quam urna quis eros. Donec vel.
		\Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec a diam lectus. Sed sit amet ipsum mauris. Maecenas congue ligula ac quam viverra nec consectetur ante hendrerit. Donec et mollis dolor. Praesent et diam eget libero egestas mattis sit amet vitae augue. Nam tincidunt congue enim, ut porta lorem lacinia consectetur. Donec ut libero sed arcu vehicula ultricies a non tortor. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean ut gravida lorem. Ut turpis felis, pulvinar a semper sed, adipiscing id dolor. Pellentesque auctor nisi id magna consequat sagittis. Curabitur dapibus enim sit amet elit pharetra tincidunt feugiat nisl imperdiet. Ut convallis libero in urna ultrices accumsan. Donec sed odio eros. Donec viverra mi quis quam pulvinar at malesuada arcu rhoncus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. In rutrum accumsan ultricies. Mauris vitae nisi at sem facilisis semper ac in est.
		\Vivamus fermentum semper porta. Nunc diam velit, adipiscing ut tristique vitae, sagittis vel odio. Maecenas convallis ullamcorper ultricies. Curabitur ornare, ligula semper consectetur sagittis, nisi diam iaculis velit, id fringilla sem nunc vel mi. Nam dictum, odio nec pretium volutpat, arcu ante placerat erat, non tristique elit urna et turpis. Quisque mi metus, ornare sit amet fermentum et, tincidunt et orci. Fusce eget orci a orci congue vestibulum. Ut dolor diam, elementum et vestibulum eu, porttitor vel elit. Curabitur venenatis pulvinar tellus gravida ornare. Sed et erat faucibus nunc euismod ultricies ut id justo. Nullam cursus suscipit nisi, et ultrices justo sodales nec. Fusce venenatis facilisis lectus ac semper. Aliquam at massa ipsum. Quisque bibendum purus convallis nulla ultrices ultricies. Nullam aliquam, mi eu aliquam tincidunt, purus velit laoreet tortor, viverra pretium nisi quam vitae mi. Fusce vel volutpat elit. Nam sagittis nisi dui.
		\Suspendisse lectus leo, consectetur in tempor sit amet, placerat quis neque. Etiam luctus porttitor lorem, sed suscipit est rutrum non. Curabitur lobortis nisl a enim congue semper. Aenean commodo ultrices imperdiet. Vestibulum ut justo vel sapien venenatis tincidunt. Phasellus eget dolor sit amet ipsum dapibus condimentum vitae quis lectus. Aliquam ut massa in turpis dapibus convallis. Praesent elit lacus, vestibulum at malesuada et, ornare et est. Ut augue nunc, sodales ut euismod non, adipiscing vitae orci. Mauris ut placerat justo. Mauris in ultricies enim. Quisque nec est eleifend nulla ultrices egestas quis ut quam. Donec sollicitudin lectus a mauris pulvinar id aliquam urna cursus. Cras quis ligula sem, vel elementum mi. Phasellus non ullamcorper urna.
		\Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. In euismod ultrices facilisis. Vestibulum porta sapien adipiscing augue congue id pretium lectus molestie. Proin quis dictum nisl. Morbi id quam sapien, sed vestibulum sem. Duis elementum rutrum mauris sed convallis. Proin vestibulum magna mi. Aenean tristique hendrerit magna, ac facilisis nulla hendrerit ut. Sed non tortor sodales quam auctor elementum. Donec hendrerit nunc eget elit pharetra pulvinar. Suspendisse id tempus tortor. Aenean luctus, elit commodo laoreet commodo, justo nisi consequat massa, sed vulputate quam urna quis eros. Donec vel.

$mpk_tss_software $mol_page
	title @ \Software
	body /
		<= Content $mol_filler

$mpk_tss_parameter_unknown $mol_view
	sub /
		<= title @ \Unknown

$mol_row $mol_view

$mpk_tss_parameter_date $mol_view
	date null
	sub /
		<= date_formatted null

$mol_list $mol_view
	render_visible_only true
	render_over 0
	sub <= rows /$mol_view
	Empty $mol_view
	Gap_before $mol_view style * paddingTop <= gap_before 0
	Gap_after $mol_view style * paddingTop <= gap_after 0
	view_window /
		0
		0

$mol_labeler $mol_list
	rows /
		<= Label $mol_view
			minimal_height 32
			sub <= label /$mol_view_content
				<= title
		<= Content $mol_view
			minimal_height 24
			sub <= content /

$mpk_tss_parameter $mol_row
	Unknown_value $mpk_tss_parameter_unknown
	Unknown_updated $mpk_tss_parameter_unknown
	value null
	updated null
	sub /
		<= Name $mol_labeler
			title <= name_title @ \Parameter
			Content <= Name_content $mol_view sub / <= name \
		<= Value $mol_labeler
			title <= value_title @ \Value
			Content <= Value_content null
		<= Updated $mol_labeler
			title <= updated_title @ \Updated
			Content <= Updated_value null
	Date $mpk_tss_parameter_date
		date <= updated

$mpk_tss_parameter_list $mol_list

$mpk_tss_pereferial_ups $mpk_tss_parameter_list
	unit null
	rows /
		<= Status $mpk_tss_parameter
			name <= status_title @ \State
			value <= status null
			updated <= updated null
		<= Power $mpk_tss_parameter
			name <= power_title @ \Power source
			value <= power_source null
			updated <= updated null
		<= Voltage $mpk_tss_parameter
			name <= voltage_title @ \Voltage
			value <= voltage null
			updated <= updated null
		<= Bat_level $mpk_tss_parameter
			name <= bat_level_title @ \Bat. level
			value <= battery_level null
			updated <= updated null
		<= Bat_time $mpk_tss_parameter
			name <= bat_time_title @ \Bat. time
			value <= battery_time null
			updated <= updated null

$mpk_tss_pereferial_status $mol_view
	status null
	colors true
	statuses *
		ready <= ready @ \Ready
		error <= error @ \Error
		not_responding <= not_responding @ \Not responding
		inactive <= inactive @ \Inactive
		unknown <= unknown @ \Unknown
	sub / <= status_text <= unknown

$mpk_tss_pereferial_source $mol_view
	status null
	statuses *
		linein <= linein @ \Linein
		internal <= internal @ \Internal
	sub /
		<= status_text \

$mpk_tss_parameter_voltage $mol_view
	sub /
		<= value null
		<= spacer \ 
		<= unit @ \V

$mpk_tss_parameter_duration $mol_view
	minutes @ \min
	value null
	sub /
		<= formatted_value \

$mol_icon_cross $mol_icon path \M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z

$mpk_tss_pereferial_details $mol_page
	unit null
	minimal_width 400
	tools /
		<= Details_close $mpk_tss_link
			arg * unit null
			sub / <= Details_close_icon $mol_icon_cross
			copy_params /
				\login
				\page
	body /
		<= unit_details null
	Ups $mpk_tss_pereferial_ups
		unit <= unit null

$mol_card $mol_list
	attr *
		^
		mol_card_status_type <= status \
	rows /$mol_view
		<= Content $mol_view
			sub <= content /$mol_view_content
				<= title
		<= Status $mol_view
			minimal_height 30
			sub /
				<= status_text <= status \

$mpk_tss_card $mpk_tss_link
	minimal_height 110
	sub /
		<= Card $mol_card
			status <= status \
			Status <= Status $mol_view
				sub /
					<= Status_text null
					<= Tools $mol_view sub /
						<= tools /
						<= Status_action $mol_button_minor
							event_click?event <=> status_click?event null
							sub / <= Status_icon $mpk_tss_icon_cloud_download
			Content <= Content $mol_row
				sub <= items /

$mpk_tss_pereferial_link $mpk_tss_card
	unit null
	arg * unit <= unit_id \
	copy_params /
		\login
		\page
		\units
	status <= unit_status \
	Status_text $mpk_tss_pereferial_status
		colors false
		status <= unit_status
	Status_icon $mpk_tss_icon_autorenew
	status_click?event <=> unit_status_click?event null
	items /
		<= Type_item $mol_labeler
			title <= type_title @ \Type
			content /
				<= type \
		<= Name_item $mol_labeler
			title <= name_title @ \Element
			content /
				<= name \

$mol_pop $mol_view
	showed?val false
	align_vert \
	align_hor \
	sub /
		<= Anchor null
	sub_visible /
		<= Anchor
		<= Bubble $mol_pop_bubble
			align <= align \bottom_center
			content <= bubble_content /$mol_view_content
			height_max <= height_max 9999

$mol_pop_bubble $mol_scroll
	sub <= content /$mol_view_content
	style *
		^
		maxHeight <= height_max 9999
	attr *
		^
		mol_pop_align <= align \
		tabindex 0

$mol_hotkey $mol_plugin
	event *
		^
		keydown?event <=> keydown?event null
	key *
	mod_ctrl false
	mod_alt false
	mod_shift false

$mol_nav $mol_plugin
	cycle?val false
	-
	mod_ctrl false
	mod_shift false
	mod_alt false
	-
	keys_x?val /
	keys_y?val /
	-
	current_x?val null
	current_y?val null
	-
	event_up?event null
	event_down?event null
	event_left?event null
	event_right?event null
	event *
		^
		keydown?event <=> event_key?event null

$mol_string $mol_view
	dom_name \input
	enabled true
	minimal_height 40
	autocomplete false
	selection?val /number
		0
		0
	auto /
		<= selection_watcher null
	field *
		^
		disabled <= disabled false
		value <= value_changed?val <=> value?val \
		placeholder <= hint_visible <= hint \
		spellcheck <= spellcheck true
		autocomplete <= autocomplete_native \
		selectionEnd <= selection_end 0
		selectionStart <= selection_start 0
		inputMode <= keyboard \text
	attr *
		^
		maxlength <= length_max +Infinity
		type <= type?val \text
	event *
		^
		input?event <=> event_change?event null
	plugins /
		<= Submit $mol_hotkey
			key * enter?event <=> submit?event null

$mol_paragraph $mol_view
	line_height 24
	letter_width 7
	width_limit +Infinity
	row_width 0
	sub / <= title

$mol_dimmer $mol_paragraph
	haystack \
	needle \
	sub <= parts /$mol_view_content
	Low* $mol_paragraph
		sub /
			<= string* \
	High* $mol_paragraph
		sub /
			<= string* \

$mol_search $mol_pop
	query?val \
	suggests /string
	plugins /$mol_plugin
		^
		<= Hotkey $mol_hotkey
			key * escape?val <=> clear?val null
		<= Nav $mol_nav
			keys_y <= nav_components /$mol_view
			current_y?component <=> nav_focused?component null
	showed?val <=> suggests_showed?val false
	align_hor \right
	Anchor $mol_view
		sub <= anchor_content /
			<= Query $mol_string
				value?val <=> query?val \
				hint <= hint @ \Search...
				submit?event <=> submit?event null
				enabled <= enabled true
				bring => bring
			<= Clear $mol_button_minor
				hint @ \Clear
				click?event <=> clear?event null
				sub /
					<= Clear_icon $mol_icon_cross
	bubble_content /$mol_view_content
		<= Menu $mol_list
			rows <= menu_items /$mol_view
	Suggest* $mol_button_minor
		click?event <=> suggest_select*?event null
		sub <= suggest_content* /$mol_view_content
			<= Suggest_label* $mol_dimmer
				haystack <= suggest_label* \
				needle <= query?val \

$mpk_tss_pereferial_page $mol_page
	unit_current_id?v \
	sub /
		<= Head
		<= Filter_value $mol_search
			hint <= filter_hint @ \Unit name or type
			query?val <=> filter_value?val \
		<= Body

$mpk_tss_pereferial_list $mol_view
	title @ \Pereferials
	pages /
		<= Main $mpk_tss_pereferial_page
			minimal_width 200
			body_scroll_top?e <=> body_scroll_top?e null
			tools <= tools /
			title <= title
			unit_current_id?v <=> unit_current_id?v \
			filter_value?val <=> filter_value?val \
			body /
				<= List $mol_list
					rows <= unit_links /
		<= Unit_current null
	Unit_details!id $mpk_tss_pereferial_details
		body_scroll_top?e <=> details_body_scroll_top?e null
		unit <= unit!id null
	Unit_link!id $mpk_tss_pereferial_link
		unit <= unit!id null

$mpk_tss_sensors $mol_page
	title @ \Sensors
	body /
		<= Content $mol_filler

$mpk_tss_reports_resolution $mol_view
	attr *
		^
		mpk_tss_reports_resolution_type <= status \
	statuses *
		success <= success @ \Success
		warning <= warning @ \Warning
	icons *
		success <= Success $mpk_tss_icon_circle_outline
		warning <= Warning $mpk_tss_icon_round_warning
	sub /
		<= Text $mol_view sub / <= status_text \

$mpk_tss_parameter_speed $mol_view
	sub /
		<= value 0
		<= spacer \ 
		<= unit @ \km/h

$mpk_tss_reports_delivery $mol_view
	attr *
		^
		mpk_tss_reports_delivery_type <= status null
	statuses *
		preparing <= preparing @ \Preparing
		sending <= sending @ \Sending
		sent <= sent @ \Sent
		error <= error @ \Error
	icons *
		preparing <= Preparing $mpk_tss_icon_sync
		sending <= Sending $mpk_tss_icon_sync
		sent <= Sent $mpk_tss_icon_done
		error <= Error $mpk_tss_icon_clear
	sub /
		<= Icon null
		<= Text $mol_view sub / <= status_text \

$mpk_tss_reports_train_link $mpk_tss_card
	report null
	arg * report <= report_id \
	copy_params /
		\login
		\page
		\trains
		\carriages
		\train_warning
		\carriage_warning
	status <= resolution
	Status_text $mpk_tss_reports_resolution
		status <= resolution null
	status_click?event <=> report_status_click?event null
	items /
		<= Id $mol_labeler
			title <= id_title @ \Id
			content /
				<= report_id \
		<= Started $mol_labeler
			title <= started_title @ \Date
			content /
				<= started \
		<= Average_speed $mol_labeler
			title <= average_speed_title @ \Speed
			content /
				<= Average_speed_formatted $mpk_tss_parameter_speed
					value <= average_speed 0
		<= Delivery $mol_labeler
			title <= delivery_title @ \Delivery
			Content <= Delivery_value $mpk_tss_reports_delivery
				status <= delivery null
		<= Train_number $mol_labeler
			title <= train_number_title @ \Train
			content /
				<= train_number \
		<= Description $mol_labeler
			title <= description_title @ \Description
			content /
				<= description \

$mol_svg_group $mol_svg
	dom_name \g

$mol_svg_title $mol_svg
	dom_name \title
	sub /
		<= title

$mol_plot_graph $mol_svg_group
	series_x /number
	series_y /number
	-
	attr *
		^
		mol_plot_graph_type <= type \solid
	-
	style *
		^
		color <= color \
	-
	viewport $mol_vector_2d /
		<= viewport_x $mol_vector_range /
			Infinity
			-Infinity
		<= viewport_y $mol_vector_range /
			Infinity
			-Infinity
	shift /number
		0
		0
	scale /number
		1
		1
	cursor_position $mol_vector_2d /
		NaN
		NaN
	dimensions_pane $mol_vector_2d /
		<= dimensions_pane_x $mol_vector_range /
			Infinity
			-Infinity
		<= dimensions_pane_y $mol_vector_range /
			Infinity
			-Infinity
	dimensions $mol_vector_2d /
		<= dimensions_x $mol_vector_range /
			Infinity
			-Infinity
		<= dimensions_y $mol_vector_range /
			Infinity
			-Infinity
	size_real $mol_vector_2d /
		0
		0
	gap $mol_vector_2d /
		<= gap_x $mol_vector_range /
			0
			0
		<= gap_y $mol_vector_range /
			0
			0
	repos_x* 0
	repos_y* 0
	indexes /number
	points /readonly(number)[]
	front /$mol_svg
	back /$mol_svg
	Hint $mol_svg_title
		title <= hint <= title \
	hue +NaN
	Sample null

$mol_plot_graph_sample $mol_view
	attr *
		^
		mol_plot_graph_type <= type \solid
	style *
		^
		color <= color \black

$mol_chart_legend $mol_scroll
	graphs /$mol_plot_graph
	graphs_front /$mol_plot_graph
	sub <= graph_legends /$mol_view
	-
	Graph_legend* $mol_view
		sub /
			<= Graph_sample_box* $mol_view
				sub /
					<= Graph_sample* null
			<= Graph_title* $mol_view
				sub /
					<= graph_title* \

$mol_plot_pane $mol_svg_root
	aspect \none
	-
	hue_base?val +NaN
	hue_shift?val 111
	-
	gap_hor 48
	gap_vert 24
	gap_left <= gap_hor
	gap_right <= gap_hor
	gap_top <= gap_vert
	gap_bottom <= gap_vert
	gap $mol_vector_2d /
		<= gap_x $mol_vector_range /
			<= gap_left
			<= gap_right
		<= gap_y $mol_vector_range /
			<= gap_bottom
			<= gap_top
	-
	shift_limit $mol_vector_2d /
		<= shift_limit_x $mol_vector_range /
			0
			0
		<= shift_limit_y $mol_vector_range /
			0
			0
	shift_default $mol_vector_2d /
		0
		0
	shift?val $mol_vector_2d /
		0
		0
	scale_limit $mol_vector_2d /
		<= scale_limit_x $mol_vector_range /
			0
			Infinity
		<= scale_limit_y $mol_vector_range /
			0
			-Infinity
	scale_default $mol_vector_2d /
		0
		0
	scale?val $mol_vector_2d /
		1
		-1
	scale_x?val 1
	scale_y?val -1
	size $mol_vector_2d /
		0
		0
	size_real $mol_vector_2d /
		1
		1
	dimensions $mol_vector_2d /
		<= dimensions_x $mol_vector_range /
			Infinity
			-Infinity
		<= dimensions_y $mol_vector_range /
			Infinity
			-Infinity
	dimensions_viewport $mol_vector_2d /
		<= dimensions_viewport_x $mol_vector_range /
			Infinity
			-Infinity
		<= dimensions_viewport_y $mol_vector_range /
			Infinity
			-Infinity
	-
	sub <= graphs_sorted /$mol_svg
	graphs_colored <= graphs_visible <= graphs_positioned <= graphs /$mol_plot_graph
	-
	plugins /
		^
		<= Touch $mol_touch
			zoom?val <=> zoom?val 1
			pan?val <=> shift?val
			pointer_center => cursor_position
			allow_draw <= allow_draw true
			allow_pan <= allow_pan true
			allow_zoom <= allow_zoom true
			action_type => action_type
			action_point => action_point
			draw_start?event <=> draw_start?event null
			draw?event <=> draw?event null
			draw_end?event <=> draw_end?event null
	- event *
		^
		dblclick?event <=> reset?event null

$mol_chart $mol_view
	gap_hor 48
	gap_vert 24
	gap_left <= gap_hor
	gap_right <= gap_hor
	gap_bottom <= gap_vert
	gap_top <= gap_vert
	graphs /$mol_plot_graph
	sub /
		<= Legend $mol_chart_legend
			graphs <= graphs_colored
		<= Plot $mol_plot_pane
			scale_x?val => zoom?val
			zoom?val <=> zoom?val
			gap_left <= gap_left
			gap_right <= gap_right
			gap_bottom <= gap_bottom
			gap_top <= gap_top
			graphs <= graphs
			graphs_colored => graphs_colored
			hue_base <= hue_base 140
			hue_shift <= hue_shift 111

$mol_plot_dot $mol_plot_graph
	points_max +Infinity
	aspect 1
	style *
		^
		stroke-width <= diameter 8
	sub /
		<= Hint
		<= Curve $mol_svg_path
			geometry <= curve \
	-
	Sample $mol_plot_graph_sample
		color <= color

$mol_svg_text $mol_svg
	dom_name \text
	pos /
	attr *
		^
		x <= pos_x \
		y <= pos_y \
		text-anchor <= align \middle
	sub /
		<= text \

$mol_svg_rect $mol_svg
	dom_name \rect
	pos /
	attr *
		^
		width <= width \0
		height <= height \0
		x <= pos_x \
		y <= pos_y \

$mol_svg_text_box $mol_svg_group
	font_size 16
	width 0
	sub /
		<= Back $mol_svg_rect
			width <= box_width \0.5rem
			height <= box_height \1rem
			pos /
				<= box_pos_x <= pos_x
				<= box_pos_y \0
		<= Text $mol_svg_text
			pos /
				<= pos_x \0
				<= pos_y \100%
			align <= align \start
			sub /
				<= text \

$mol_plot_ruler $mol_plot_graph
	step 0
	scale_axis 1
	scale_step 1
	shift_axis 1
	dimensions_axis $mol_vector_range /
		Infinity
		-Infinity
	viewport_axis $mol_vector_range /
		Infinity
		-Infinity
	axis_points /number
	normalize?val 0
	precision 1
	sub /
		<= Background $mol_svg_rect
			pos_x <= background_x \0
			pos_y <= background_y \0
			width <= background_width \100%
			height <= background_height \14
		<= Curve $mol_svg_path
			geometry <= curve \
		<= labels_formatted /
		<= Title $mol_svg_text_box
			pos_x <= title_pos_x \0
			pos_y <= title_pos_y \100%
			align <= title_align \start
			text <= title
	Label* $mol_svg_text
		pos <= label_pos* /
			<= label_pos_x* \
			<= label_pos_y* \
		text <= label_text* \
		align <= label_align \

$mol_plot_ruler_vert $mol_plot_ruler
	title_align \end
	label_align \end
	title_pos_y \14
	label_pos_x* <= title_pos_x
	background_height \100%
	background_width <= title_pos_x

$mol_plot_ruler_hor $mol_plot_ruler
	title_align \start
	label_align \middle
	title_pos_x \0
	title_pos_y \100%
	label_pos_y* <= title_pos_y
	background_width \100%

$mol_plot_mark_cross $mol_plot_graph
	labels /string
	title_x_gap 4
	threshold 16
	graphs /$mol_plot_graph
	dimensions $mol_vector_2d /
		<= dimensions_x $mol_vector_range /
			Infinity
			-Infinity
		<= dimensions_y $mol_vector_range /
			Infinity
			-Infinity
	sub /
		<= Curve $mol_svg_path
			geometry <= curve \
		<= Label_x $mol_svg_text_box
			pos_x <= title_x_pos_x \0
			pos_y <= title_x_pos_y \100%
			text <= title_x \
		<= Label_y $mol_svg_text_box
			pos_x <= title_y_pos_x \0
			pos_y <= title_y_pos_y \0
			text <= title_y \

$mpk_tss_reports_axle_chart $mol_chart
	axle null
	carriage null
	gap_left 48
	gap_right 16
	gap_bottom 24
	gap_top 16
	graphs /
		<= Forces_left $mol_plot_dot
			title <= forces_left_title @ \Left wheel
			series_x <= forces_left_x /number
			series_y <= forces_left_y /number
			points_max <= points_max 600
		<= Forces_right $mol_plot_dot
			title <= forces_right_title @ \Right wheel
			series_x <= forces_right_x /number
			series_y <= forces_right_y /number
			points_max <= points_max
		<= Vert_ruler $mol_plot_ruler_vert
			title <= vert_title @ \kN
		<= Hor_ruler $mol_plot_ruler_hor
			title <= hor_title @ \cm
			series_x <= forces_left_x
		<= Cross $mol_plot_mark_cross
			graphs /
				<= Forces_left
				<= Forces_right

$mpk_tss_parameter_weight $mol_view
	sub /
		<= value 0
		<= spacer \ 
		<= unit @ \kg

$mpk_tss_reports_carriage_type $mol_view
	value null
	values *
		hopper <= hopper @ \Hopper
		flatcar <= flatcar @ \Flatcar
		tank <= tank @ \Tank
		covered <= covered @ \Covered
	sub /
		<= status_text \

$mpk_tss_parameter_length $mol_view
	sub /
		<= value 0
		<= spacer \ 
		<= unit @ \m

$mpk_tss_reports_violation $mol_view
	status null
	none @ \None
	empty false
	statuses *
		slider <= slider @ \Slider
		vyscherbiny <= vyscherbiny @ \Vyscherbiny
		sink <= sink @ \Sink
		dent <= dent @ \Dent
	group /
		<= status_text \
	sub <= group

$mpk_tss_reports_carriage_violation $mpk_tss_reports_violation
	group /
		<= before \(
		<= status_text
		<= after \)

$mpk_tss_reports_carriage_load $mol_view
	status null
	statuses *
		free <= free @ \Free
		full <= full @ \Full
	sub / <= status_text \

$mpk_tss_reports_carriage_link $mpk_tss_card
	minimal_height 100
	carriage null
	arg * carriage <= carriage_id \
	copy_params /
		\login
		\page
		\report
		\carriages
		\trains
		\train_warning
		\carriage_warning
	title @ \Train %train_number | Carriage %carriage_number
	status <= resolution
	Status_text $mol_view
		sub /
			<= Status_main $mpk_tss_reports_resolution status <= resolution null
			<= Violation $mpk_tss_reports_carriage_violation
				status <= violation null
	Status_icon $mpk_tss_icon_cloud_download
	status_click?event <=> carriage_status_click?event null
	additional /
	items /
		<= Place $mol_labeler
			title <= place_title @ \Place
			content /
				<= place \
		<= Carriage_number $mol_labeler
			title <= carriage_number_title @ \Carriage
			content /
				<= carriage_number \
		<= Load $mol_labeler
			title <= load_title @ \Load
			content /
				<= Load_text $mpk_tss_reports_carriage_load
					status <= load \
		<= Speed $mol_labeler
			title <= speed_title @ \Speed
			content /
				<= Speed_formatted $mpk_tss_parameter_speed value <= speed 0

$mpk_tss_reports_wheel_link $mol_view
	wheel null
	axle_id \
	attr *
		^
		mpk_tss_reports_wheel_type <= resolution \
	sub /
		<= name \

$mpk_tss_reports_axle_link $mpk_tss_link
	axle null
	arg * axle <= axle_id \
	copy_params /
		\login
		\page
		\report
		\carriage
		\trains
		\carriages
		\train_warining
		\carriage_warining
	sub /
		<= Wheels $mol_list
			rows
				<= wheels /
	Wheel!id $mpk_tss_reports_wheel_link
		wheel <= wheel!id null
		axle_id <= axle_id

$mpk_tss_reports_axle_list $mol_list
	carriage null
	axle_current null
	rows
		<= axis /
	Axle_link!id $mpk_tss_reports_axle_link
		axle <= axle!id null
		current <= current!id false

$mpk_tss_reports_carriage_details $mol_page
	carriage null
	title @ \Train %train_number | Carriage %carriage_number
	minimal_width 1400
	tools /
		<= Close $mpk_tss_link
			arg * carriage null
			sub / <= Close_icon $mol_icon_cross
			copy_params /
				\page
				\login
				\report
				\carriages
				\trains
				\train_warning
				\carriage_warning
	body /
		<= Main $mol_row sub /
			<= Info $mpk_tss_reports_carriage_link
				carriage <= carriage
				additional /
					<= Weight $mol_labeler
						title <= total_weight_title @ \Total weight
						content /
							<= Weight_content $mpk_tss_parameter_weight
								value <= total_weight 0
					<= Type $mol_labeler
						title <= type_title @ \Type
						content /
							<= Type_content $mpk_tss_reports_carriage_type
								value <= type \
					<= Length $mol_labeler
						title <= length_title @ \Length
						content / <= Length_content $mpk_tss_parameter_length
							value <= length 0
					<= Violation $mol_labeler
						title <= violation_title @ \Violation
						content / <= Violation_content $mpk_tss_reports_violation
							empty true
							status <= violation null
			<= Axle_list $mpk_tss_reports_axle_list
				carriage <= carriage null
				axle_current => axle_current
			^ details <= details /$mol_view
	Axle_chart $mpk_tss_reports_axle_chart
		carriage <= carriage null
		axle <= axle_current2 $mpk_tss_reports_domain_axle

$mol_check $mol_button_minor
	attr *
		^
		mol_check_checked <= checked?val false
		aria-checked <= checked?val false
		role \checkbox
	sub /$mol_view_content
		<= Icon null
		<= label /
			<= Title $mol_view
				sub /
					<= title \

$mol_check_icon $mol_check

$mpk_tss_reports_check_warning $mol_check_icon
	checked?val <=> filter_warning?val true
	Icon $mpk_tss_icon_round_warning

$mpk_tss_reports_carriage_page $mol_page
	minimal_width 337
	sub /
		<= Head
		<= Search $mol_view
			sub /
				<= Filter_number $mol_search
					hint <= hint @ \Carriage number
					query?val <=> filter_number?val \
				<= Filter_warning $mpk_tss_reports_check_warning
					checked?val <=> filter_warning?val true
		<= Body

$mpk_tss_reports_carriage_list $mol_view
	report null
	title @ \Train № %train_number
	pages /
		<= Main $mpk_tss_reports_carriage_page
			title <= title
			filter_number?val <=> filter_number?val \
			filter_warning?val <=> filter_warning?val true
			body_scroll_top?e <=> body_scroll_top?e null
			tools /
				<= Details_close $mpk_tss_link
					arg * report null
					sub / <= Details_close_icon $mol_icon_cross
					copy_params /
						\login
						\page
						\trains
						\carriages
						\train_warining
						\carriage_warining
			body /
				<= Carriages $mol_list
					rows <= carriage_links /
		<= Carriage null
	Carriage_details!id $mpk_tss_reports_carriage_details
		carriage <= carriage!id null
		body_scroll_top?e <=> focus_main?e null
	Carriage_link!id $mpk_tss_reports_carriage_link
		carriage <= carriage!id null

$mpk_tss_card_list $mol_list
	minimal_width 300
	current_id \
	attr *
		^
		mpk_tss_card_list_selected <= selected false

$mpk_tss_reports_train_page $mol_page
	minimal_width 520
	report_current_id?uri \
	sub /
		<= Head
		<= Search $mol_view
			sub /
				<= Filter_number $mol_search
					hint <= hint @ \Train number or report id
					query?val <=> filter_number?val \
				<= Filter_warning $mpk_tss_reports_check_warning
					checked?val <=> filter_warning?val true
		<= Body

$mpk_tss_reports_train_list $mol_view
	title @ \Reports
	pages /
		<= Main $mpk_tss_reports_train_page
			body_scroll_top?e <=> body_scroll_top?e null
			tools <= tools /
			title <= title
			report_current_id?id <=> report_current_id?id \
			filter_number?val <=> filter_number?val \
			filter_warning?val <=> filter_warning?val true
			body /
				<= Reports $mpk_tss_card_list
					current_id <= report_current_id?id \
					minimal_width 300
					rows <= report_links /
	-
	Report_link!id $mpk_tss_reports_train_link
		minimal_height 100
		report <= report!id null
	-
	Report_details!id $mpk_tss_reports_carriage_list
		report <= report!id null
		body_scroll_top?e <=> focus_main?e null

$mol_image $mol_view
	dom_name \img
	field *
		^
		src <= uri \
		alt <= title
		loading <= loading \eager
		decoding <= decoding \async
		crossOrigin <= cors null
	minimal_width 16
	minimal_height 16

$mol_form_field $mol_labeler
	bids /string
	label /
		<= name \
		<= Bid $mol_view
			sub / <= bid \
	content / <= control null

$mol_button_major $mol_button_typed
	attr *
		^
		mol_theme \$mol_theme_accent

$mol_form $mol_list
	submit_allowed true
	submit_blocked false
	event *
		^
		keydown?event <=> keydown?event null
	submit?event null
	rows /
		<= Body $mol_list
			sub <= body <= form_fields /$mol_form_field
		<= Foot $mol_row
			sub <= foot <= buttons /$mol_view

$mpk_tss_login $mol_list
	submit?v false
	sub / <= Form $mol_form
		form_fields /
			<= Login_field $mol_form_field
				name <= login_label @ \User name
				control <= Login $mol_string
					value?val <=> login?val \
			<= Password_field $mol_form_field
				name <= password_label @ \Password
				control <= Password $mol_string
					value?val <=> password?val \
					type \password
		buttons /
			<= Submit $mol_button_major
				sub / <= submit_label @ \Log In
				event_click?val <=> event_submit?val null
				disabled <= submit_blocked false

$mpk_tss $mol_view
	title \Terminal № %terminal_number | Traffic security system
	attr *
		mol_theme <= theme \$mol_theme_light
	terminal_text @ \Terminal № %terminal_number
	sub /
		<= Head $mol_view
			sub /
				<= Terminal_link $mol_button_minor
					enabled false
					sub /
						<= terminal_formatted_label \
				<= Logged_user
		<= Body $mpk_tss_main
			Logged_user => Logged_user

$mpk_tss_main $mol_book
	Logged_user null
	User_link $mol_button_minor
		event_click?event <=> logout_click?event null
		sub /
			<= User_email $mol_view
				sub /
					<= logged_email \
			<= User_signout $mpk_tss_icon_exit_to_app
	Menu_item!id $mpk_tss_link
		arg <= menu_page_arg!id *
		title <= menu_page_title!id \
		copy_params /
			\login
	menu_pages *
		summary <= Summary $mpk_tss_summary
			body_scroll_top?event <=> event_front_up?event
		software <= Software $mpk_tss_software
			tools <= common_tools
			body_scroll_top?event <=> event_front_up?event
		pereferial <= Pereferial $mpk_tss_pereferial_list
			tools <= common_tools
			body_scroll_top?event <=> event_front_up?event
		sensors <= Sensors $mpk_tss_sensors
			tools <= common_tools
			body_scroll_top?event <=> event_front_up?event
		reports <= Reports $mpk_tss_reports_train_list
			tools <= common_tools
			body_scroll_top?event <=> event_front_up?event
	common_tools /
		<= Details_close $mpk_tss_link
			arg * page null
			sub / <= Details_close_icon $mol_icon_cross
			copy_params /
				\login
	pages /
		<= Sidebar $mol_page
			head /
				<= Logo $mol_image
					uri \mpk/tss/tss_logo.svg
					event * click?val <=> body_scroll_top?val null
			title <= sidebar_title @ \Menu
			minimal_width 230
			body <= page_body /
				<= Login $mpk_tss_login
					submit?v <=> login_submit?v false
				<= Menu $mol_list
					rows
						<= menu_items /
			foot /
				<= Foot_content $mol_row
					sub /
						<= Foot_text $mol_view
							sub /
								<= copyright @ \© %year MPK Software, Russia
		<= Summary
		<= menu_pages
		<= details null
	Placeholder $mpk_tss_placeholder
		title \

$mpk_tss_placeholder $mol_page
	attr *
		^
		tabindex null
	title \
	tools /
	body /
		<= Image $mol_image uri \mpk/tss/placeholder.svg

$mpk_tss_summary_status $mol_view
	title \
	statuses *
		warning <= warning @ \Warning
		error <= error @ \Error
		success <= success @ \Success
		ready <= ready @ \Ready
	sub /
		<= title
	attr *
		^
		mpk_tss_summary_status_type <= type \success

$mol_section $mol_list rows /
	<= Head $mol_view
		sub <= head /
			<= Title $mol_paragraph title <= title
			<= Tools $mol_view sub <= tools /
	<= Content $mol_list
		rows <= content /

$mpk_tss_summary_section $mol_section

$mol_text_code_token $mol_dimmer
	attr *
		^
		mol_text_code_token_type <= type \

$mol_text_code_token_link $mol_text_code_token
	dom_name \a
	type \code-link
	attr *
		^
		href <= uri \
		target \_blank

$mol_text_code_row $mol_paragraph
	text \
	minimal_height 24
	numb_showed true
	syntax null
	uri_resolve* \
	Numb $mol_view
		sub /
			<= numb 0
	Token* $mol_text_code_token
		type <= token_type* \
		haystack <= token_text* \
		needle <= highlight \
	Token_link* $mol_text_code_token_link
		haystack <= token_text* \
		needle <= highlight \
		uri <= token_uri* \
	find_pos* null

$mol_stack $mol_view

$mol_icon_clipboard $mol_icon path \M19,3H14.82C14.4,1.84 13.3,1 12,1C10.7,1 9.6,1.84 9.18,3H5C3.9,3 3,3.9 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.9 20.1,3 19,3M12,3C12.55,3 13,3.45 13,4C13,4.55 12.55,5 12,5C11.45,5 11,4.55 11,4C11,3.45 11.45,3 12,3

$mol_icon_clipboard_outline $mol_icon path \M19,3H14.82C14.4,1.84 13.3,1 12,1C10.7,1 9.6,1.84 9.18,3H5C3.9,3 3,3.9 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.9 20.1,3 19,3M12,3C12.55,3 13,3.45 13,4C13,4.55 12.55,5 12,5C11.45,5 11,4.55 11,4C11,3.45 11.45,3 12,3M7,7H17V5H19V19H5V5H7V7Z

$mol_button_copy $mol_button_minor
	text \
	sub /
		<= Icon $mol_icon_clipboard_outline
		<= title \


$mol_text_code $mol_stack
	attr *
		^
		mol_text_code_sidebar_showed <= sidebar_showed false
	text \
	text_lines /string
	find_pos* null
	uri_base \
	sub /
		<= Rows $mol_list
			render_visible_only <= render_visible_only false
			rows <= rows /
				<= Row*0 $mol_text_code_row
					numb_showed <= sidebar_showed
					numb <= row_numb* 0
					text <= row_text* \
					syntax <= syntax null
					uri_resolve* <= uri_resolve* \
					highlight <= highlight \
		<= Copy $mol_button_copy
			hint @ \Copy whole code
			text <= text

$mol_float $mol_view
	style *
		^
		minHeight \auto

$mol_icon_chevron $mol_icon path \M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z

$mol_check_expand $mol_check
	Icon $mol_icon_chevron
	level 0
	style *
		^
		paddingLeft <= level_style \0px
	checked?val <=> expanded?val false
	enabled <= expandable false

$mol_grid $mol_view
	row_height 32
	row_ids /string[]
	row_id* null
	col_ids /
	records *
	record* null
	hierarchy null
	hierarchy_col \
	minimal_width 0
	-
	sub /
		<= Head
		<= Table $mol_grid_table
			sub <= rows /$mol_view
	Head $mol_grid_row
		cells <= head_cells /$mol_view
	Row* $mol_grid_row
		minimal_height <= row_height
		minimal_width <= minimal_width
		cells <= cells* /$mol_view
	-
	Cell* $mol_view
	cell* null
	Cell_text* $mol_grid_cell
		sub <= cell_content_text* <= cell_content* /$mol_view_content
	Cell_number* $mol_grid_number
		sub <= cell_content_number* <= cell_content* /$mol_view_content
	Col_head* $mol_float
		dom_name \th
		sub <= col_head_content* /$mol_view_content
	Cell_branch* $mol_check_expand
		level <= cell_level* 0
		label <= cell_content* /$mol_view_content
		expanded?val <=> cell_expanded*?val false
	Cell_content* /
		<= Cell_dimmer* $mol_dimmer
			needle <= needle \
			haystack <= cell_value* \

$mol_grid_table $mol_list
	- dom_name \table

$mol_grid_row $mol_view
	- dom_name \tr
	sub <= cells /$mol_view

$mol_grid_cell $mol_view
	- dom_name \td
	minimal_height 40

$mol_grid_number $mol_grid_cell

$mol_link_iconed $mol_link
	sub /
		<= Icon $mol_image
			uri <= icon \
			title \
	content /
		<= title <= uri
	host \

$mol_embed_native $mol_scroll
	uri?val \
	dom_name \object
	window null
	attr *
		^
		data <= uri
		type <= mime \
	sub /
		<= Fallback $mol_link
			uri <= uri
			sub /
				<= title \
	message *
		hashchange? <=> uri_change? null

$mol_frame $mol_embed_native
	dom_name \iframe
	attr *
		^
		data null
		type null
		src <= uri?val \about:config
		srcdoc <= html null
		allow <= allow \
		allowfullscreen <= fullscreen true
	accelerometer true
	autoplay true
	encription true
	gyroscope true
	pip true

$mol_embed_youtube $mol_check
	uri \
	video_preview \
	video_id \
	checked? <=> active? false
	sub /
		<= Image $mol_image
			title <= title \
			uri <= video_preview \
		<= Frame $mol_frame
			title <= title \
			uri <= video_embed \


$mol_embed_any $mol_ghost
	Image $mol_image
		title <= title \
		uri <= uri \
	Object $mol_embed_native
		title <= title \
		uri <= uri \
	Youtube $mol_embed_youtube
		title <= title \
		uri <= uri \

$mol_text $mol_list
	uri_base \
	text \
	param \
	flow_tokens /
	auto /
		<= auto_scroll null
	- \Blocks
	Paragraph* $mol_paragraph
		sub <= block_content* /
	Quote* $mol_text
		uri_resolve* <= uri_resolve* \
		text <= quote_text* \
		highlight <= highlight \
		auto_scroll null
	List* $mol_text_list
		uri_resolve* <= uri_resolve* \
		type <= list_type* \-
		text <= list_text* \
		highlight <= highlight \
	item_index* 0
	Header* $mol_text_header
		minimal_height 40
		level <= header_level* 1
		content <= block_content* /
		arg <= header_arg* *
	Pre* $mol_text_code
		text <= pre_text* \
		highlight <= highlight \
		uri_resolve* <= uri_resolve* \
		sidebar_showed <= pre_sidebar_showed <= code_sidebar_showed true
	Cut* $mol_view dom_name \hr
	- \Table
	Table* $mol_grid
		head_cells <= table_head_cells* /
		rows <= table_rows* /
	Table_row* $mol_grid_row
		cells <= table_cells* /
	Table_cell* $mol_text
		auto_scroll null
		highlight <= highlight \
		uri_resolve* <= uri_resolve* \
		text <= table_cell_text* \
	- \Grid
	Grid* $mol_grid
		rows <= grid_rows* /
	Grid_row* $mol_grid_row
		cells <= grid_cells* /
	Grid_cell* $mol_text
		auto_scroll null
		highlight <= highlight \
		uri_resolve* <= uri_resolve* \
		text <= grid_cell_text* \
	- \Lines
	String* $mol_dimmer
		dom_name \span
		needle <= highlight \
		haystack <= line_text* \
	Span* $mol_text_span
		dom_name \span
		type <= line_type* \
		sub <= line_content* /
	Code_line* $mol_text_code_row
		numb_showed false
		highlight <= highlight \
		text <= line_text* \
		uri_resolve* <= uri_resolve* \
		syntax <= code_syntax null
	Link* $mol_link_iconed
		uri <= link_uri* \
		content <= line_content* /
	Link_http* $mol_link_iconed
		uri <= link_uri* \
		content / <= link_host* \
	Embed* $mol_embed_any
		uri <= link_uri* \
		title <= line_text* \

$mol_text_header $mol_paragraph
	level 1
	sub /
		<= Link $mol_link
			arg <= arg *
			hint @ \Permalink to this section
			sub <= content /

$mol_text_span $mol_paragraph
	dom_name \span
	attr *
		^
		mol_text_type <= type \

$mol_expander $mol_list
	rows /
		<= Label $mol_view
			sub /
				<= Trigger $mol_check_expand
					checked?val <=> expanded?val false
					label <= label /
						<= title
				<= Tools null
		<= Content $mol_list
			rows <= content /

$mol_text_list $mol_text
	auto_scroll null
	attr *
		^
		mol_text_list_type <= type \
	Paragraph* $mol_text_list_item
		index <= item_index*
		sub <= block_content*

$mol_text_list_item $mol_paragraph
	attr *
		^
		mol_text_list_item_index <= index 0

$mpk_tss_summary $mol_page
	title @ \Summary
	minimal_width 600
	body /
		<= Statuses $mpk_tss_summary_section
			Content <= Statuses_content $mol_list rows /
				<= All $mpk_tss_summary_status
					type \warning
				<= Software $mpk_tss_summary_item
					title <= software_title @ \Software
					type \warning
					arg * page \software
				<= Sensors $mpk_tss_summary_item
					title <= sensors_title @ \Sensors
					type \ready
					arg * page \sensors
				<= Pereferials $mpk_tss_summary_item
					title <= pereferial_title @ \Pereferial
					type \error
					arg * page \pereferial
		<= Log $mol_expander
			title <= log_title @ \Show log ...
			Content <= Log_content $mol_list rows /
				<= Text $mol_text text \
					\ Wed 24 Apr 2019 02:33:14 PM MSK: Report was successfully sent
					\ Wed 24 Apr 2019 02:32:24 PM MSK: Connection to SKAT server (10.32.35.11) established
					\ Wed 24 Apr 2019 02:32:09 PM MSK: Connecting to SKAT server (10.32.35.11), attempt 1...
					\ Wed 24 Apr 2019 02:31:49 PM MSK: Violation report prepared to sending
					\ Wed 24 Apr 2019 02:31:45 PM MSK: Violation report successfully created
					\ Wed 24 Apr 2019 02:31:40 PM MSK: Values processing finished. Violation detected
					\ Wed 24 Apr 2019 02:31:35 PM MSK: Values processing finished. Violation detected
					\ Wed 24 Apr 2019 02:30:05 PM MSK: Values processing started

$mpk_tss_summary_item $mpk_tss_link
	copy_params /
		\login
	type \
	sub /
		<= Title $mol_view
			sub /
				<= title
		<= Status $mpk_tss_summary_status
			type <= type
